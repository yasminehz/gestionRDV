{% extends 'base.html.twig' %}

{% block title %}Accueil - gestionRDV{% endblock %}

{% block body %}
<div class="container">
  <div class="text-center mb-4">
    <h1>Bienvenue sur gestionRDV</h1>
    <p class="text-muted">G√©rez vos rendez-vous m√©dicaux simplement et facilement</p>
  </div>

  {% if app.user %}
    <div class="card mb-4">
      <div class="mb-3">
        <h2 class="mb-2">Bienvenue, <span class="text-primary">{{ app.user.prenom }} {{ app.user.nom }}</span>!</h2>
        <p class="text-muted mb-0">Vous √™tes connect√© avec l'adresse email : <strong>{{ app.user.email }}</strong></p>
      </div>
      
      <div style="display: flex; gap: 12px; align-items: center; margin-top: 16px;">
        {% if is_granted('ROLE_MEDECIN') %}
          <span class="badge bg-primary">M√©decin</span>
        {% elseif is_granted('ROLE_PATIENT') %}
          <span class="badge bg-info">Patient</span>
        {% elseif is_granted('ROLE_ASSISTANT') %}
          <span class="badge bg-warning">Assistant</span>
        {% endif %}
      </div>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 32px;">
      
      {% if is_granted('ROLE_PATIENT') %}
        <div class="card">
          <h3 style="margin-top: 0;">Prendre un RDV</h3>
          <p class="text-muted">Demandez un rendez-vous aupr√®s d'un m√©decin</p>
          <a href="{{ path('app_rendez_vous_new') }}" class="btn btn-primary" style="width: 100%; margin-top: 12px;">Nouveau RDV</a>
        </div>

        <div class="card">
          <h3 style="margin-top: 0;">Mes RDV</h3>
          <p class="text-muted">Consultez l'historique de vos rendez-vous</p>
          <a href="{{ path('app_mes_rendez_vous') }}" class="btn btn-outline" style="width: 100%; margin-top: 12px;">Voir mes RDV</a>
        </div>

      {% elseif is_granted('ROLE_MEDECIN') %}
        <div class="card">
          <h3 style="margin-top: 0;">Mes indisponibilit√©s</h3>
          <p class="text-muted">G√©rez vos cr√©neaux indisponibles</p>
          <a href="{{ path('indisponibilite_index') }}" class="btn btn-outline-primary" style="width: 100%; margin-top: 12px;">G√©rer mes indisponibilit√©s</a>
          <a href="/mes-rendez-vous" class="btn btn-outline-primary" style="width: 100%; margin-top: 12px;">Voir mes RDV</a>
        </div>

        <div class="card">
          <h3 style="margin-top: 0;">RDV en attente</h3>
          <p class="text-muted">Validez ou refusez les demandes de RDV</p>
          <a href="" class="btn btn-primary" style="width: 100%; margin-top: 12px;">Voir les RDV</a>
        </div>

        <div class="card">
          <h3 style="margin-top: 0;">Mes assistants</h3>
          <p class="text-muted">G√©rez votre √©quipe d'assistants</p>
          <a href="" class="btn btn-outline-primary" style="width: 100%; margin-top: 12px;">Voir les assistants</a>
        </div>

      {% elseif is_granted('ROLE_ASSISTANT') %}
        <div class="card">
          <h3 style="margin-top: 0;">RDV du m√©decin</h3>
          <p class="text-muted">Consultez l'agenda de votre m√©decin</p>
          <a href="" class="btn btn-primary" style="width: 100%; margin-top: 12px;">Voir l'agenda</a>
        </div>

        <div class="card">
          <h3 style="margin-top: 0;">Rendez‚Äëvous</h3>
          <p class="text-muted">G√©rez les rendez‚Äëvous et les demandes associ√©es</p>
          <a href="" class="btn btn-outline-primary" style="width: 100%; margin-top: 12px;">Voir les RDV</a>
        </div>

      {% endif %}
    </div>

  {% else %}
    <div class="card mb-4">
      <div class="text-center">
        <p class="mb-3" style="font-size: 1.2rem;">Vous n'√™tes pas connect√©</p>
        <p class="text-muted mb-4">Connectez-vous pour acc√©der √† votre espace personnel</p>
        <a href="{{ path('app_login') }}" class="btn btn-primary btn-lg">Se connecter</a>
      </div>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 32px;">
      <div class="card">
        <h3 style="margin-top: 0;">üë®‚Äç‚öïÔ∏è M√©decin</h3>
        <p class="text-muted">G√©rez vos rendez-vous et votre √©quipe d'assistants</p>
      </div>
      <div class="card">
        <h3 style="margin-top: 0;">ü§í Patient</h3>
        <p class="text-muted">Demandez et suivez vos rendez-vous m√©dicaux</p>
      </div>
      <div class="card">
        <h3 style="margin-top: 0;">üë• Assistant</h3>
        <p class="text-muted">Aidez √† la gestion des rendez-vous de votre m√©decin</p>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
